<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>å‰åç«¯æ•°æ®äº¤äº’ - è¡¨å•æäº¤- cool4ZBL</title>
    <meta name="description" content="æœ€è¿‘æƒ³æ€»ç»“ä¸‹å‰åç«¯æ•°æ®äº¤äº’æ–¹å¼ï¼Œé¡ºä¾¿ç»§ç»­å­¦ä¹ ä¸‹ç½‘ç»œç›¸å…³ï¼Œä»¥ä¸‹æ˜¯ç¬¬ä¸€ç¯‡ï¼Œæœ€ç®€å•ã€æœ€å¸¸è§ä¸”åº”ç”¨æœ€å¹¿æ³›çš„ã€Œè¡¨å•æäº¤ã€ã€‚ æŒ‰äº¤äº’æ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œæäº¤åæœ‰åˆ·æ–°çš„æ™®é€šè¡¨å•æäº¤å’Œæ— åˆ·æ–°çš„ Ajax è¡¨å•æäº¤ã€‚ 1. æ™®é€šè¡¨å•æäº¤ ä¸‹é¢æ˜¯ä¸€ä¸ªå¾ˆæ™®é€šçš„ç”¨æˆ·ç™»å½•è¡¨å•ï¼š &amp;lt;form class=&amp;quot;form login-form&amp;quot; id=&amp;quot;loginForm&amp;quot;       method=&amp;quot;POST&amp;quot; action=&amp;quot;api.test.com/login&amp;quot;&amp;gt;   &amp;lt;label for=&amp;quot;name&amp;quot;&amp;gt;Username&amp;lt;/label&amp;gt;&amp;lt;input type=&amp;quot;email&amp;quot; id=&amp;quot;name&amp;quot;&amp;gt;   &amp;lt;label for=&amp;quot;password&amp;quot;&amp;gt;Password&amp;lt;/label&amp;gt;&amp;lt;input type=&amp;quot;password&amp;quot; id=&amp;quot;password&amp;quot;&amp;gt;   &amp;lt;label for=&amp;quot;captcha&amp;quot;&amp;gt;Captcha&amp;lt;/label&amp;gt;&amp;lt;input type=&amp;quot;text&amp;quot; id=&amp;quot;captcha&amp;tech,frontend,ajax" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#d55b6a">
    <meta name="theme-color" content="#ffffff">


    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />

    <link rel="stylesheet" type="text/css" href="/assets/built/hl-styles/atom-one-dark.css" />


    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="ZBL&#39;s Doodle" href="/rss/index.xml">
<link rel="canonical" href="http://zhangbinliu.me/2017-08-10-summary-data-transmission-submit-form/" />
</head>
<body class="author-template author-ZBL post-template tag-tech tag-frontend tag-ajax nav-closed">

    

    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-tech tag-frontend tag-ajax">

        <header class="post-header">
            <h1 class="post-title">å‰åç«¯æ•°æ®äº¤äº’ - è¡¨å•æäº¤</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-08-10">10 August 2017</time>  on <a href="/tag/tech/">tech</a>, <a href="/tag/frontend/">frontend</a>, <a href="/tag/ajax/">ajax</a>
            </section>
        </header>


        <section class="post-content">
          <p>æœ€è¿‘æƒ³æ€»ç»“ä¸‹å‰åç«¯æ•°æ®äº¤äº’æ–¹å¼ï¼Œé¡ºä¾¿ç»§ç»­å­¦ä¹ ä¸‹ç½‘ç»œç›¸å…³ï¼Œä»¥ä¸‹æ˜¯ç¬¬ä¸€ç¯‡ï¼Œæœ€ç®€å•ã€æœ€å¸¸è§ä¸”åº”ç”¨æœ€å¹¿æ³›çš„ã€Œè¡¨å•æäº¤ã€ã€‚</p>
<p>æŒ‰äº¤äº’æ–¹å¼åˆ†ä¸ºä¸¤ç§ï¼Œæäº¤åæœ‰åˆ·æ–°çš„æ™®é€šè¡¨å•æäº¤å’Œæ— åˆ·æ–°çš„ Ajax è¡¨å•æäº¤ã€‚</p>
<h2 id="1-">1. æ™®é€šè¡¨å•æäº¤</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¾ˆæ™®é€šçš„ç”¨æˆ·ç™»å½•è¡¨å•ï¼š</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;form login-form&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;loginForm&quot;</span>
      <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;POST&quot;</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;api.test.com/login&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;name&quot;</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;email&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;name&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;password&quot;</span>&gt;</span>Password<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;password&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;password&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;captcha&quot;</span>&gt;</span>Captcha<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;text&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;captcha&quot;</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;selLoc&quot;</span>&gt;</span>Location<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;location&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;selLoc&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;cn&quot;</span>&gt;</span>China Mainland<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;hk&quot;</span>&gt;</span>Hong Kong<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;tw&quot;</span>&gt;</span>Tai Wan<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;us&quot;</span>&gt;</span>America<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;jp&quot;</span>&gt;</span>Japan<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;&quot;</span>&gt;</span>Somewhere<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> &gt;</span>Anywhere<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

  <span class="hljs-comment">&lt;!--  General submit button  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;submit&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;Submit Form&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!--  Customize  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;submit&quot;</span>&gt;</span>Submit Form<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
  <span class="hljs-comment">&lt;!--  Image button   --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;image&quot;</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;graphic.gif&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span></code></pre><ul>
<li><p>å½“ç”¨æˆ·å•å‡»æäº¤æŒ‰é’®æˆ–è€…å›¾åƒæŒ‰é’®çš„æ—¶å€™ï¼Œå°±ä¼šæäº¤è¡¨å•ï¼›</p>
</li>
<li><p><code>&lt;input type=&quot;submit&quot;&gt;</code> / <code>&lt;button type=&quot;submit&quot;&gt;</code> / <code>&lt;input type=&quot;image&quot; src=&#39;img.gif&#39;&gt;</code> éƒ½å¯ä»¥ä½œä¸ºè¡¨å•æäº¤æŒ‰é’®ã€‚ä¸”åªè¦å­˜åœ¨ä»»ä½•ä¸€ç§æŒ‰é’®ï¼Œåœ¨ç›¸åº”è¡¨å•æ§ä»¶æœ‰ç„¦ç‚¹çš„æƒ…å†µä¸‹ï¼ŒæŒ‰å›è½¦é”®å°±å¯ä»¥æäº¤è¯¥è¡¨å•ï¼Œè¿™é‡Œåº”è¯¥æ˜¯æµè§ˆå™¨å¯¹è¡¨å•å…ƒç´ å›è½¦é”®çš„é»˜è®¤è¡Œä¸ºï¼Œæ‰€ä»¥åœ¨æäº¤è¡¨å•å‰ï¼Œä¼šè§¦å‘ <code>submit Event</code>ï¼Œå¯ä»¥ç”¨æ¥åšè¡¨å•éªŒè¯ï¼›</p>
</li>
<li><p>å¦‚æœç›´æ¥ä½¿ç”¨ JS <code>submit()</code> æäº¤è¡¨å•ï¼Œè¿™é‡Œåˆ™ä¸ä¼šè§¦å‘è¡¨å•çš„ <code>submit Event</code>ï¼Œæ‰€ä»¥éœ€è¦åœ¨è°ƒç”¨æ–¹æ³•å‰åšè¡¨å•éªŒè¯ï¼›</p>
<pre class="hljs"><code>let <span class="hljs-tag">form</span> = document.<span class="hljs-function"><span class="hljs-title">getElementById</span><span class="hljs-params">(<span class="hljs-string">&#39;loginForm&#39;</span>)</span></span>
<span class="hljs-tag">form</span>.<span class="hljs-function"><span class="hljs-title">submit</span><span class="hljs-params">()</span></span></code></pre></li>
<li><p>ä»¥ä¸Šçš„æ–¹æ³•æäº¤è¡¨å•ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è¡¨å•æäº¤ï¼Œä¼šè§¦å‘æµè§ˆå™¨æäº¤è¡¨å•çš„é»˜è®¤è¡Œä¸ºï¼šåˆ·æ–°é¡µé¢ï¼ç”¨æˆ·ä½“éªŒä¹Ÿå°†å¤§æ‰“æŠ˜æ‰£ã€‚æ‰€ä»¥å‡ºç°äº†ä¼˜åŒ–ç‰ˆçš„ Ajax è¡¨å•æäº¤ã€‚</p>
</li>
</ul>
<h2 id="2-ajax-">2. Ajax è¡¨å•æäº¤</h2>
<p>ä»ç„¶æ˜¯ä¸Šé¢çš„è¡¨å•å…ƒç´ ï¼Œå› ä¸º ajax æ—¶å€™å¯ä»¥æŒ‡å®š URLï¼Œæ‰€ä»¥è¿™é‡Œçš„è¡¨å•å…ƒç´ å¯ä»¥çœç•¥ <code>action</code> å±æ€§ã€‚</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;form login-form&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;loginForm&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;POST&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;name&quot;</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;email&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;name&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;password&quot;</span>&gt;</span>Password<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;password&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;password&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;captcha&quot;</span>&gt;</span>Captcha<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;text&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;captcha&quot;</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">label</span> <span class="hljs-attribute">for</span>=<span class="hljs-value">&quot;selLoc&quot;</span>&gt;</span>Location<span class="hljs-tag">&lt;/<span class="hljs-title">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;location&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;selLoc&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;cn&quot;</span>&gt;</span>China Mainland<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;hk&quot;</span>&gt;</span>Hong Kong<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;tw&quot;</span>&gt;</span>Tai Wan<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;us&quot;</span>&gt;</span>America<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;jp&quot;</span>&gt;</span>Japan<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;&quot;</span>&gt;</span>Somewhere<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> &gt;</span>Anywhere<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

  <span class="hljs-comment">&lt;!--  General submit button  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;submit&quot;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&quot;Submit Form&quot;</span>&gt;</span>
  <span class="hljs-comment">&lt;!--  Customize  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;submit&quot;</span>&gt;</span>Submit Form<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
  <span class="hljs-comment">&lt;!--  Image button   --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;image&quot;</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;graphic.gif&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span></code></pre><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ¯ä¸ªè¡¨å•å­—æ®µçš„ <code>type</code> å±æ€§ï¼Œè¿åŒ <code>name</code> å’Œ <code>value</code> å±æ€§ä¸€èµ·å®ç°å¯¹è¡¨å•çš„åºåˆ—åŒ–ã€‚å…ˆäº†è§£ä¸‹æµè§ˆå™¨å°†æ•°æ®å‘é€ç»™æœåŠ¡å™¨çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<blockquote>
<ul>
<li><p>å¯¹è¡¨å•å­—æ®µçš„åç§°å’Œå€¼è¿›è¡Œ URL ç¼–ç ï¼Œä½¿ç”¨å’Œå·(&amp;) åˆ†éš”ã€‚</p>
</li>
<li><p>ä¸å‘é€ç¦ç”¨çš„è¡¨å•å­—æ®µã€‚</p>
</li>
<li><p>åªå‘é€å‹¾é€‰çš„å¤é€‰æ¡†å’Œå•é€‰æŒ‰é’®ã€‚</p>
</li>
<li><p>ä¸å‘é€ type ä¸º &quot;reset&quot; å’Œ &quot;button&quot; çš„æŒ‰é’® ã€‚</p>
</li>
<li><p>å¤šé€‰é€‰æ‹©æ¡†ä¸­çš„æ¯ä¸ªé€‰ä¸­çš„å€¼å•ç‹¬ä¸€ä¸ªæ¡ç›®ã€‚</p>
</li>
<li><p>åœ¨å•å‡»æäº¤æŒ‰é’®æäº¤è¡¨å•çš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šå‘é€æäº¤æŒ‰é’®ï¼›å¦åˆ™ï¼Œä¸å‘é€æäº¤æŒ‰é’®ã€‚ä¹ŸåŒ…æ‹¬ type</p>
<p>ä¸º &quot;image&quot; çš„<code>&lt;input&gt;</code>  ã€‚</p>
</li>
<li><p><code>&lt;select&gt;</code> çš„å€¼ï¼Œå°±æ˜¯é€‰ä¸­çš„ <code>&lt;option&gt;</code>  å…ƒç´ çš„ value ç‰¹æ€§çš„å€¼ã€‚å¦‚æœ <code>&lt;option&gt;</code>  æ²¡æœ‰</p>
<p>value ç‰¹æ€§ï¼Œåˆ™æ˜¯ <code>&lt;option&gt;</code> å…ƒç´ çš„æ–‡æœ¬å€¼ã€‚</p>
</li>
</ul>
<p>â€” â€” ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹</p>
</blockquote>
<p>åœ¨è¡¨å•åºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ä¸åŒ…å«ä»»ä½•æŒ‰é’®å­—æ®µï¼Œå› ä¸ºç»“æœå­—ç¬¦ä¸²å¾ˆå¯èƒ½æ˜¯é€šè¿‡å…¶ä»–æ–¹å¼æäº¤çš„ï¼Œé™¤æ­¤ä¹‹å¤–å…¶ä»–è§„åˆ™éƒ½åº”è¯¥éµå¾ªã€‚ä»¥ä¸‹å°±æ˜¯å®ç°è¡¨å•åºåˆ—åŒ–çš„ä»£ç ã€‚</p>
<pre class="hljs"><code><span class="hljs-comment">// ref: Professional JavaScript Ch14.4</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serialize</span>(<span class="hljs-params">form</span>) </span>{
  <span class="hljs-keyword">let</span> parts = [],
      field = <span class="hljs-literal">null</span>,
      option, optValue

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, len = form.elements.length; i &lt; len; i++) {
    field = form.elements[i]

    <span class="hljs-keyword">switch</span>(field.type) {
      <span class="hljs-comment">// select elements</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;select-one&#39;</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;select-multiple&#39;</span>:
        <span class="hljs-keyword">if</span> (field.name.length) {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>, optLen = field.options.length; j &lt; optLen; j++) {
            option = field.options[j]
            <span class="hljs-keyword">if</span> (option.selected) {
              <span class="hljs-comment">// DOM</span>
              optValue = <span class="hljs-string">&#39;&#39;</span>
              <span class="hljs-keyword">if</span> (option.hasAttribute) {
                optValue = option.hasAttibute(<span class="hljs-string">&#39;value&#39;</span>)
                  ? option.value : option.text
              } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// IE</span>
                optValue = option.attributes[<span class="hljs-string">&#39;value&#39;</span>].specified
                  ? option.value : option.text
              }
              parts.push(<span class="hljs-built_in">encodeURIComponent</span>(filed.name) + <span class="hljs-string">&quot;=&quot;</span> + <span class="hljs-built_in">encodeURIComponent</span>(optValue))
            }
          }
        }
        <span class="hljs-keyword">break</span>
      <span class="hljs-keyword">case</span> <span class="hljs-literal">undefined</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;file&#39;</span>:  <span class="hljs-comment">// files input</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;submit&#39;</span>: <span class="hljs-comment">// submit buttons</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;reset&#39;</span>: <span class="hljs-comment">// reset buttons</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;button&#39;</span>: <span class="hljs-comment">// customize buttons</span>
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;radio&#39;</span>:  <span class="hljs-comment">// radio buttons</span>
      <span class="hljs-keyword">case</span> <span class="hljs-string">&#39;checkbox&#39;</span>:  <span class="hljs-comment">// checkbox</span>
        <span class="hljs-keyword">if</span> (!field.checked) {
          <span class="hljs-keyword">break</span>
        }
      <span class="hljs-keyword">default</span>:
        <span class="hljs-comment">// excluding no name field</span>
        <span class="hljs-keyword">if</span> (field.name.length) {
          parts.push(<span class="hljs-built_in">encodeURIComponent</span>(filed.name) + <span class="hljs-string">&quot;=&quot;</span> + <span class="hljs-built_in">encodeURIComponent</span>(optValue))
        }
    }
  }
  <span class="hljs-keyword">return</span> parts.join(<span class="hljs-string">&#39;&amp;&#39;</span>)
}</code></pre><p>å›åˆ°ç”¨æˆ·ç™»å½•åœºæ™¯ï¼Œå½“ç”¨æˆ·å¡«å†™äº†è¡¨å•å­—æ®µï¼Œ<code>name</code> ä¸º <code>cool4zbl</code>ï¼Œ<code>password</code> ä¸º <code>secret@Pass</code> ï¼Œé€‰æ‹© <code>location</code> ä¸º<code>America</code>ï¼Œç„¶åç‚¹å‡» <code>submit</code> æŒ‰é’®æäº¤è¡¨å•ã€‚æˆ‘ä»¬å¯ä»¥ç›‘å¬åˆ° <code>submit Event</code>ï¼Œæ‹¦æˆªé»˜è®¤çš„è¡¨å•æäº¤äº‹ä»¶ï¼Œç„¶ååœ¨æäº¤è¡¨å•å‰æ‰§è¡Œ <code>serialize(document.getElementById(&#39;loginForm&#39;))</code> ï¼Œå°†ä¼šè¿”å›</p>
<p><code>name=cool4zbl&amp;password=sercret%40Pass&amp;location=America</code>ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ Ajax Post åºåˆ—åŒ–åçš„æ•°æ®åˆ°æœåŠ¡å™¨ï¼Œæ ¹æ®æœåŠ¡å™¨ç«¯è¿”å›çš„ä¿¡æ¯ï¼ˆä¸€èˆ¬ä¸º<code>json</code>æ ¼å¼ï¼‰æ¥æ˜¾ç¤ºæ˜¯å¦ç™»å½•æˆåŠŸæˆ–è€…æ˜¯å‡ºç°äº†é”™è¯¯ã€‚</p>
<pre class="hljs"><code><span class="hljs-keyword">let</span> form = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#39;loginForm&#39;</span>)
form.onsubmit = (e) =&gt; {
  e.preventDefault()
  <span class="hljs-keyword">const</span> data = serialize(form)
  $.ajax({
    data,
    url: <span class="hljs-string">&#39;api.test.com&#39;</span>,
    type: form.getAttribute(<span class="hljs-string">&#39;method&#39;</span>),
    contentType: <span class="hljs-string">&#39;application/json; charset=UTF-8&#39;</span>,
    dataType: <span class="hljs-string">&#39;json&#39;</span>,
    success: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resData</span>) </span>{
      <span class="hljs-comment">// do something with success resData</span>
      <span class="hljs-comment">// blah</span>
    },
    error: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">xhr, type</span>) </span>{
      <span class="hljs-comment">// Oops, something wrong occurs...</span>
    }
  })
}</code></pre><p>è¿™é‡Œä¸ºäº†ä¸“æ³¨äºè§£é‡Šæäº¤è¡¨å•å‰åæµè§ˆå™¨çš„è¡Œä¸ºï¼Œä½¿ç”¨ jQuery ajax API ç®€åŒ–äº†å…·ä½“å‰åç«¯ Ajax é€šä¿¡æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<p><strong>è¡¨å•æäº¤</strong>è¿™åº”è¯¥æ˜¯å‰ç«¯åº”è¯¥æŒæ¡çš„æœ€åŸºæœ¬ï¼Œä¹Ÿæ˜¯åº”ç”¨å¾—æœ€å¹¿æ³›çš„å‰åç«¯æ•°æ®äº¤äº’æ–¹å¼äº†ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰æµè§ˆå™¨é€šä¿¡æ—¶çš„ä¸€äº›å‘ä¼šè¢«è¸©åˆ°ï¼Œéœ€è¦å»å¡«ï¼Œæ‰€ä»¥æ›´è¯¦ç»†çš„ Ajax é€šä¿¡æ€»ç»“è¯·å‚è€ƒä¸‹ä¸€ç¯‡ã€Œå‰åç«¯æ•°æ®äº¤äº’ - Ajaxã€ã€‚</p>
<p>ä»¥ä¸Šã€‚</p>

        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="/author/ZBL/" style="background-image: url(/content/images/avatar_zbl.jpg)"><span class="hidden">cool4ZBL's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="/author/ZBL/">cool4ZBL</a></h4>

                    <p>ğŸ‘» Web Developer. ğŸ‘¾ Front End. ğŸ¤– DevOps. ğŸ¤“ Tool Enthusiast.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">Beijing</span>
                    <span class="author-link icon-link"><a href="http://zhangbinliu.me/">http://zhangbinliu.me/</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%20-%20%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4&amp;url=http://zhangbinliu.me/2017-08-10-summary-data-transmission-submit-form/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://zhangbinliu.me/2017-08-10-summary-data-transmission-submit-form/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://zhangbinliu.me/2017-08-10-summary-data-transmission-submit-form/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


            <section itemprop="comment" class="post-comments">
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_config = function () {
                  this.page.url = 'http://zhangbinliu.me/2017-08-10-summary-data-transmission-submit-form/';
                  this.page.identifier = '16';
                };
                var disqus_shortname = 'zblsdoodle';
                (function() { // DON'T EDIT BELOW THIS LINE
                  var d = document, s = d.createElement('script');
                  s.async = true;
                  s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                  s.setAttribute('data-timestamp', +new Date());
                  (d.head || d.body).appendChild(s);
                })();
              </script>
            </section>

        </footer>

    </article>
</main>

<aside class="read-next">
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://zhangbinliu.me">ZBL&#x27;s Doodle</a> &copy; 2017</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <script type="text/javascript" src="/assets/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Tencent Analysis -->
    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=63324671" charset="UTF-8"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-56185102-1', 'auto');
      ga('send', 'pageview');
  </script>

</body>
</html>
